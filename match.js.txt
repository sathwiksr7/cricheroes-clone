// Start a new match
function startMatch() {
  const players = getData("players");

  if (players.length < 2) {
    alert("You need at least 2 players to start a match.");
    return;
  }

  const team1 = prompt("Enter Team 1 Name:");
  const team2 = prompt("Enter Team 2 Name:");

  if (!team1 || !team2) {
    alert("Both team names are required.");
    return;
  }

  const tossWinner = Math.random() < 0.5 ? team1 : team2;
  const tossChoice = prompt(`${tossWinner} wins the toss! Choose Batting or Bowling:`).toLowerCase();

  const match = {
    team1,
    team2,
    tossWinner,
    tossChoice,
    date: new Date().toLocaleString()
  };

  let matches = getData("matches");
  matches.push(match);
  saveData("matches", matches);

  alert(`Match started! ${tossWinner} chose to ${tossChoice}.`);
}

// Display match details
function displayMatches() {
  const matches = getData("matches");
  const matchContainer = document.getElementById("matchContainer");

  if (!matches.length) {
    matchContainer.innerHTML = "<p>No matches available.</p>";
    return;
  }

  matches.forEach((match, index) => {
    const matchDiv = document.createElement("div");
    matchDiv.classList.add("match-card");
    matchDiv.innerHTML = `
      <h3>Match ${index + 1}</h3>
      <p><strong>Team 1:</strong> ${match.team1}</p>
      <p><strong>Team 2:</strong> ${match.team2}</p>
      <p><strong>Toss Winner:</strong> ${match.tossWinner} (Chose to ${match.tossChoice})</p>
      <p><strong>Date:</strong> ${match.date}</p>
    `;
    matchContainer.appendChild(matchDiv);
  });
}

window.onload = displayMatches;
